@set /a units=%~1
@(
	@for /F "delims=" %%i in (ref/header.txt) do @echo %%i
	@CALL :segment1 "%units%" "0"
	@echo end
) > "mdlsrc/window_frame_system_%units%.smd"
@goto end
:segment1
@if %~1 lss 32 (
	@CALL :short_segment1 %~1 %~2
) else (
	@CALL :full_segment1 %~1 %~2
	@CALL :segmentn "%~1" "%~2" "2"
)
@exit /b 0
:segmentn
@set /a len=%~1-32
@set /a pos=%~2+32
@CALL :segment%~3 "%len%" "%pos%"
@exit /b 0
:segment2
@if %~1 lss 32 (
	@CALL :short_segment2 %~1 %~2
) else (
	@CALL :full_segment2 %~1 %~2
	@CALL :segmentn "%~1" "%~2" "1"
)
@exit /b 0
:short_segment1
@set /a vendnum=%~1*14456+6168
@set vend=%vendnum%
@if %vend% lss 100000 @(
	@if %vend% lss 10000 @(
		@set vend=00%vend%
	) else @set vend=0%vend%
)
@set /a zend=%~2+%~1
@CALL :segment "%~2" "%zend%" "006168" "%vend%"
@exit /b 0
:short_segment2
@set /a vend=%~1*14456+468750
@set /a zend=%~2+%~1
@CALL :segment "%~2" "%zend%" "468750" "%vend%"
@exit /b 0
:full_segment1
@set /a zend=%~2+32
@CALL :segment "%~2" "%zend%" "006168" "468750"
@exit /b 0
:full_segment2
@set /a zend=%~2+32
@CALL :segment "%~2" "%zend%" "468750" "931332"
@exit /b 0
:segment
@echo window_frame_system
@echo   0 0.000000 0.000000 %~1.000000 -1.000000 0.000000 0.000000 0.567708 0.%~3 1 0 1.000000
@echo   0 0.000000 -2.000001 %~2.000000 -1.000000 0.000000 0.000000 0.619792 0.%~4 1 0 1.000000
@echo   0 0.000000 -0.000001 %~2.000000 -1.000000 0.000000 0.000000 0.567708 0.%~4 1 0 1.000000
@echo window_frame_system
@echo   0 0.000000 0.000000 %~1.000000 -1.000000 0.000000 0.000000 0.567708 0.%~3 1 0 1.000000
@echo   0 0.000000 -2.000000 %~1.000000 -1.000000 0.000000 0.000000 0.619792 0.%~3 1 0 1.000000
@echo   0 0.000000 -2.000001 %~2.000000 -1.000000 0.000000 0.000000 0.619792 0.%~4 1 0 1.000000
@echo window_frame_system
@echo   0 0.000000 -2.000000 %~1.000000 0.000000 -1.000000 0.000000 0.942708 0.%~3 1 0 1.000000
@echo   0 2.000000 -2.000001 %~2.000000 0.000000 -1.000000 0.000000 0.994792 0.%~4 1 0 1.000000
@echo   0 0.000000 -2.000001 %~2.000000 0.000000 -1.000000 0.000000 0.942708 0.%~4 1 0 1.000000
@echo window_frame_system
@echo   0 0.000000 -2.000000 %~1.000000 0.000000 -1.000000 0.000000 0.942708 0.%~3 1 0 1.000000
@echo   0 2.000000 -2.000000 %~1.000000 0.000000 -1.000000 0.000000 0.994792 0.%~3 0 1.000000
@echo   0 2.000000 -2.000001 %~2.000000 0.000000 -1.000000 0.000000 0.994792 0.%~4 1 0 1.000000
@echo window_frame_system
@echo   0 2.000000 -2.000000 %~1.000000 1.000000 0.000000 0.000000 0.630208 0.%~3 1 0 1.000000
@echo   0 2.000000 -0.000001 %~2.000000 1.000000 0.000000 0.000000 0.682292 0.%~4 1 0 1.000000
@echo   0 2.000000 -2.000001 %~2.000000 1.000000 0.000000 0.000000 0.630208 0.%~4 1 0 1.000000
@echo window_frame_system
@echo   0 2.000000 -2.000000 %~1.000000 1.000000 0.000000 0.000000 0.630208 0.%~3 1 0 1.000000
@echo   0 2.000000 0.000000 %~1.000000 1.000000 0.000000 0.000000 0.682292 0.%~3 1 0 1.000000
@echo   0 2.000000 -0.000001 %~2.000000 1.000000 0.000000 0.000000 0.682292 0.%~4 1 0 1.000000
@echo window_frame_system
@echo   0 2.000000 0.000000 %~1.000000 0.000000 1.000000 0.000000 0.755208 0.%~3 1 0 1.000000
@echo   0 0.000000 -0.000001 %~2.000000 0.000000 1.000000 0.000000 0.807292 0.%~4 1 0 1.000000
@echo   0 2.000000 -0.000001 %~2.000000 0.000000 1.000000 0.000000 0.755208 0.%~4 1 0 1.000000
@echo window_frame_system
@echo   0 2.000000 0.000000 %~1.000000 0.000000 1.000000 0.000000 0.755208 0.%~3 1 0 1.000000
@echo   0 0.000000 0.000000 %~1.000000 0.000000 1.000000 0.000000 0.807292 0.%~3 1 0 1.000000
@echo   0 0.000000 -0.000001 %~2.000000 0.000000 1.000000 0.000000 0.807292 0.%~4 1 0 1.000000
@echo window_frame_system
@echo   0 -2.000000 2.000000 %~1.000000 -1.000000 0.000000 0.000000 0.817708 0.%~3 1 0 1.000000
@echo   0 -2.000000 -0.000001 %~2.000000 -1.000000 0.000000 0.000000 0.869792 0.%~4 1 0 1.000000
@echo   0 -2.000000 1.999999 %~2.000000 -1.000000 0.000000 0.000000 0.817708 0.%~4 1 0 1.000000
@echo window_frame_system
@echo   0 -2.000000 2.000000 %~1.000000 -1.000000 0.000000 0.000000 0.817708 0.%~3 1 0 1.000000
@echo   0 -2.000000 0.000000 %~1.000000 -1.000000 0.000000 0.000000 0.869792 0.%~3 1 0 1.000000
@echo   0 -2.000000 -0.000001 %~2.000000 -1.000000 0.000000 0.000000 0.869792 0.%~4 1 0 1.000000
@echo window_frame_system
@echo   0 -2.000000 0.000000 %~1.000000 0.000000 -1.000000 0.000000 0.317708 0.%~3 1 0 1.000000
@echo   0 0.000000 -0.000001 %~2.000000 0.000000 -1.000000 0.000000 0.369792 0.%~4 1 0 1.000000
@echo   0 -2.000000 -0.000001 %~2.000000 0.000000 -1.000000 0.000000 0.317708 0.%~4 1 0 1.000000
@echo window_frame_system
@echo   0 -2.000000 0.000000 %~1.000000 0.000000 -1.000000 0.000000 0.317708 0.%~3 1 0 1.000000
@echo   0 0.000000 0.000000 %~1.000000 0.000000 -1.000000 0.000000 0.369792 0.%~3 1 0 1.000000
@echo   0 0.000000 -0.000001 %~2.000000 0.000000 -1.000000 0.000000 0.369792 0.%~4 1 0 1.000000
@echo window_frame_system
@echo   0 0.000000 0.000000 %~1.000000 1.000000 0.000000 0.000000 0.192708 0.%~3 1 0 1.000000
@echo   0 0.000000 1.999999 %~2.000000 1.000000 0.000000 0.000000 0.244792 0.%~4 1 0 1.000000
@echo   0 0.000000 -0.000001 %~2.000000 1.000000 0.000000 0.000000 0.192708 0.%~4 1 0 1.000000
@echo window_frame_system
@echo   0 0.000000 0.000000 %~1.000000 1.000000 0.000000 0.000000 0.192708 0.%~3 1 0 1.000000
@echo   0 0.000000 2.000000 %~1.000000 1.000000 0.000000 0.000000 0.244792 0.%~3 1 0 1.000000
@echo   0 0.000000 1.999999 %~2.000000 1.000000 0.000000 0.000000 0.244792 0.%~4 1 0 1.000000
@echo window_frame_system
@echo   0 0.000000 2.000000 %~1.000000 0.000000 1.000000 0.000000 0.692708 0.%~3 1 0 1.000000
@echo   0 -2.000000 1.999999 %~2.000000 0.000000 1.000000 0.000000 0.744792 0.%~4 1 0 1.000000
@echo   0 0.000000 1.999999 %~2.000000 0.000000 1.000000 0.000000 0.692708 0.%~4 1 0 1.000000
@echo window_frame_system
@echo   0 0.000000 2.000000 %~1.000000 0.000000 1.000000 0.000000 0.692708 0.%~3 1 0 1.000000
@echo   0 -2.000000 2.000000 %~1.000000 0.000000 1.000000 0.000000 0.744792 0.%~3 1 0 1.000000
@echo   0 -2.000000 1.999999 %~2.000000 0.000000 1.000000 0.000000 0.744792 0.%~4 1 0 1.000000
@exit /b 0
:end